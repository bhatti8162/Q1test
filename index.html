<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MCQ Trainer</title>
  <style>
    :root{
      --bg:#0f1724; --card:#0b1220; --accent:#06b6d4; --muted:#94a3b8; --good:#16a34a; --bad:#ef4444;
      --radius:14px; --glass: rgba(255,255,255,0.03);
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:linear-gradient(180deg, #071226 0%, var(--bg) 100%);
      color:#e6eef6; display:flex; align-items:center; justify-content:center; padding:28px;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    .app{width:100%; max-width:980px; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:var(--radius); padding:22px; box-shadow: 0 10px 30px rgba(2,6,23,0.6); display:grid; grid-template-columns: 1fr 340px; gap:20px;}
    header{grid-column:1/-1; display:flex; align-items:center; justify-content:space-between; gap:12px}
    h1{margin:0;font-size:20px}
    .meta{color:var(--muted); font-size:13px}
    .panel{background:var(--card); border-radius:12px; padding:18px}
    .question-count{display:flex; align-items:center; gap:12px}
    .progress{flex:1; height:10px; background:rgba(255,255,255,0.04); border-radius:999px; overflow:hidden}
    .progress > i{display:block; height:100%; background:linear-gradient(90deg,var(--accent),#60a5fa); width:0%}
    .question{margin-top:12px; font-size:18px}
    .choices{margin-top:16px; display:grid; gap:10px}
    .choice{background:var(--glass); padding:12px 14px; border-radius:10px; cursor:pointer; border:1px solid transparent}
    .choice:hover{transform:translateY(-2px)}
    .choice.selected{outline:2px solid rgba(6,182,212,0.12)}
    .choice.correct{background:linear-gradient(90deg, rgba(16,185,129,0.12), rgba(16,185,129,0.06)); border-color: rgba(16,185,129,0.25)}
    .choice.incorrect{background:linear-gradient(90deg, rgba(239,68,68,0.08), rgba(239,68,68,0.03)); border-color: rgba(239,68,68,0.25)}
    .controls{display:flex; gap:8px; margin-top:16px}
    button{background:transparent; color:inherit; border:1px solid rgba(255,255,255,0.06); padding:8px 12px; border-radius:8px; cursor:pointer}
    button.primary{background:linear-gradient(90deg,var(--accent),#60a5fa); color:#042027; border:none}
    .small{font-size:13px; padding:6px 8px}
    .sidebar{display:flex; flex-direction:column; gap:12px}
    .card{background:var(--card); border-radius:12px; padding:12px}
    .stats{display:flex; gap:12px; align-items:center; justify-content:space-between}
    .score{font-size:28px; font-weight:700}
    .review-list{max-height:280px; overflow:auto; padding-top:6px}
    .review-item{display:flex; gap:8px; align-items:center; padding:8px; border-radius:8px}
    .dot{width:12px; height:12px; border-radius:999px}
    .muted{color:var(--muted)}
    footer{grid-column:1/-1; display:flex; justify-content:space-between; gap:12px; margin-top:8px}
    @media (max-width:900px){.app{grid-template-columns: 1fr;} .sidebar{order:2}}
    /* Loader screen */
    #loader{position:fixed;top:0;left:0;right:0;bottom:0;background:var(--bg);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:99;padding:20px}
    #loader textarea{width:100%;max-width:600px;height:200px;margin-top:12px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.2);color:inherit;padding:10px;font-family:monospace}
    pre{background:rgba(255,255,255,0.05);padding:10px;border-radius:8px;text-align:left;width:100%;max-width:600px;overflow-x:auto}
  </style>
</head>
<body>
  <div id="loader">
    <h1>Q1 MCQ Trainer</h1>
    <p class="muted">Paste JSON questions in this format or use sample:</p>
    <pre>[
  {"q": "What is the capital of France?", "choices": ["Paris", "London", "Berlin", "Rome"], "answer": 0},
  {"q": "Which planet is known as the Red Planet?", "choices": ["Earth", "Mars", "Jupiter", "Venus"], "answer": 1},
  {"q": "What is 2 + 2?", "choices": ["3", "4", "5", "6"], "answer": 1}
]</pre>
    <textarea id="jsonInput"></textarea>
    <div style="margin-top:10px;display:flex;gap:8px">
      <button id="loadJson">Load JSON</button>
      <button id="useSample">Use Sample Questions</button>
    </div>
  </div>

  <div class="app" role="application" aria-labelledby="appTitle" style="display:none">
    <header>
      <div>
        <h1 id="appTitle">Q1 MCQ Trainer</h1>
        <div class="meta">Practice fast. Learn faster. Keyboard: 1-4 answer · N next · P prev · R restart</div>
      </div>
      <div class="meta">Questions: <span id="totalQuestions">0</span></div>
    </header>
    <section class="panel" aria-live="polite">
      <div class="question-count">
        <div class="meta">Question <strong id="currentIndex">0</strong>/<strong id="totalIndex">0</strong></div>
        <div class="progress" aria-hidden="true"><i id="progressBar"></i></div>
      </div>
      <div class="question" id="questionText">Loading…</div>
      <div class="choices" id="choices"></div>
      <div class="controls">
        <button id="prevBtn" class="small">◀ Prev</button>
        <button id="nextBtn" class="small">Next ▶</button>
        <button id="restartBtn" class="small">Restart</button>
      </div>
    </section>
    <aside class="sidebar">
      <div class="card">
        <div class="stats"><div><div class="muted">Score</div><div class="score" id="score">0</div></div><div><div class="muted">Correct</div><div id="correctCount">0</div></div></div>
      </div>
      <div class="card"><div class="muted">Review</div><div class="review-list" id="reviewList"></div></div>
    </aside>
    <footer><div class="muted">Built for practice. | Made By Sameer Bhatti</div></footer>
  </div>

<script>
let questions=[],order=[],current=0,userAnswers=[];
const el=id=>document.getElementById(id);
const setText=(id,txt)=>{const d=el(id);if(d)d.textContent=txt}
function shuffleArr(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]}return a}

const sample=[
  {q:"What is the capital of France?",choices:["Paris","London","Berlin","Rome"],answer:0},
  {q:"Which planet is known as the Red Planet?",choices:["Earth","Mars","Jupiter","Venus"],answer:1},
  {q:"What is 2 + 2?",choices:["3","4","5","6"],answer:1}
];

function render(){const total=order.length;setText('totalQuestions',total);setText('totalIndex',total);if(total===0){setText('questionText','No questions loaded.');el('choices').innerHTML='';setText('currentIndex','0');return}if(current<0)current=0;if(current>=total)current=total-1;setText('currentIndex',current+1);const q=questions[order[current]];setText('questionText',q.q);const choicesEl=el('choices');choicesEl.innerHTML='';q.choices.forEach((c,i)=>{const btn=document.createElement('div');btn.className='choice';btn.innerHTML=`${String.fromCharCode(65+i)}. ${c}`;btn.onclick=()=>chooseAnswer(i);btn.dataset.choiceIndex=i;choicesEl.appendChild(btn)});el('progressBar').style.width=Math.round((current/Math.max(1,total))*100)+'%';renderReviewList();updateScore()}

function chooseAnswer(choiceIdx){const qIndex=order[current];const q=questions[qIndex];const ua={selected:choiceIdx,correct:(choiceIdx===q.answer)};userAnswers[qIndex]=ua;[...el('choices').children].forEach(cEl=>{const idx=Number(cEl.dataset.choiceIndex);cEl.classList.remove('selected');if(idx===choiceIdx)cEl.classList.add('selected')});updateScore()}

function renderReviewList(){const list=el('reviewList');list.innerHTML='';order.forEach((qidx,i)=>{const ua=userAnswers[qidx];const item=document.createElement('div');item.className='review-item';const dot=document.createElement('div');dot.className='dot';dot.style.background=!ua? '#94a3b8': ua.correct?'var(--good)':'var(--bad)';item.appendChild(dot);const txt=document.createElement('div');txt.style.flex='1';txt.innerHTML=`<div style=\"font-weight:600\">Q${i+1}</div><div class=\"muted\" style=\"font-size:13px\">${questions[qidx].q}</div>`;item.appendChild(txt);item.onclick=()=>{current=i;render()};list.appendChild(item)})}

function updateScore(){const total=order.length;let correct=0;order.forEach(i=>{const ua=userAnswers[i];if(ua&&ua.correct)correct++});setText('score',`${correct}/${total}`);setText('correctCount',correct)}

el('nextBtn').onclick=()=>{if(current<order.length-1)current++;render()}
el('prevBtn').onclick=()=>{if(current>0)current--;render()}
el('restartBtn').onclick=()=>{if(confirm('Restart?')){userAnswers=[];current=0;render()}}

el('useSample').onclick=()=>loadQuestions(sample)
el('loadJson').onclick=()=>{try{const parsed=JSON.parse(el('jsonInput').value);if(Array.isArray(parsed))loadQuestions(parsed);else alert('JSON must be array of questions')}catch(e){alert('Invalid JSON')}}

function loadQuestions(arr){questions=arr.map(q=>({q:q.q,choices:q.choices.slice(),answer:q.answer}));order=questions.map((_,i)=>i);userAnswers=Array(questions.length);current=0;el('loader').style.display='none';document.querySelector('.app').style.display='grid';render()}
</script>
</body>
</html>